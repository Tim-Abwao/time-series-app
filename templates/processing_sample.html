<!DOCTYPE html>
<html>
<head>
	<title>Processing Sample Time Series</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='tstyle.css')}}">
	<style type="text/css">
		body {
			background: url({{ url_for('static', filename='home_background_large.jpg')}}) no-repeat fixed;
			background-size: cover;
		}
		@media only screen and (max-width: 768px) {
			body {
				background: url({{ url_for('static', filename='home_background_small.jpg')}}) no-repeat fixed;
				background-size: cover;
				max-width: 90%;
			}

		}
	</style>
</head>
<body >
	{% if sample %}
	<h1>Creating a sample</h1>
	<p>Please fill the form below:</p>
		<form action="{{ url_for('create_sample')}}" method="post">
			Start date: <input type="date" name="start" min='2020-01-01' max="{{ today }}"><br>
			End date: <input type="date" name="stop" min='{{ today }}' max="2038-01-01"><br>
			Frequency:  <select name="frequency">
			{% for frequency in frequencies %}
				<option value="{{ frequency }}">{{frequencies[frequency] }}</option>
			{% endfor %}
						</select><br>
			<input class="button" type="submit" value="submit">
		</form>


	{% endif %}

	{% if graphs %}
	<h1>Results for sample</h1>
		<h2>1. Graphical Output:</h2>
			<p>Graphs reveal the trend in the data, at a glance. They also help discover seasonal and/or cyclic tendencies present in the data.</p>
			<p><a href="https://en.wikipedia.org/wiki/Autocorrelation">Autocorrelation</a> and <a href="https://en.wikipedia.org/wiki/Partial_autocorrelation_function">Partial-Autocorrelation</a> plots can provide hints on a suitable model to begin fitting. <a href="https://en.wikipedia.org/wiki/Box%E2%80%93Jenkins_method#Autocorrelation_and_partial_autocorrelation_plots">This article</a> describes how.</p>
			<p>Graphs are also very useful in visualising the goodness of fit. In general, a good model should reasonably replicate the behaviour in the data used.</p>
			<blockquote><b>Note:</b> The results below are for automatically fitted models. In practice, to achieve relatively accurate results, models would often need further fine-tuning.</blockquote>
			{% for graph in range(6) %}
				<img src="{{ graphs[graph]}}">
			{% endfor %}
		<h2>2. Numerical output</h2>
		<p>A 14-period sample of the results, just to see how the numbers vary.</p>
			<table>
				<tr>
					<th>Index</th><th>Actual Data</th><th>AR(Autoreg)</th><th>SARIMAX</th><th>Exponential Smoothing</th>
				</tr>
				{% for index, values in results.iterrows() %}
				<tr>
					<td>{{ index }}</td><td>{{ values[0] }}</td><td>{{ values['AR'] }}</td><td>{{ values['SARIMAX'] }}</td><td>{{ values['Exponential Smoothing'] }}</td>
				</tr>
				{% endfor %}
				<tr><td><b>Totals</b></td>
					{% for total in totals %}
					<td><b>{{ total }}</b></td>
					{% endfor %}
				</tr>
			</table>
	{% endif %}
	<footer >
		<a href="/">Back to Home</a>
	</footer>
</body>
</html>