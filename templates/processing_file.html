{% extends 'base.html' %}
{% block title %} Processing {{ filename }} {% endblock %}
{% block body %}

<body>
	<div class="content">
		<h1>Results for {{ filename }}</h1>
		<h2>1. Graphical Output:</h2>
		<div class="info">

			<p>Graphs help visualise the trend in the data; clearly revealing whether there's been
				an increase, decrease or no change in the data values over time.</p>
			<p>Graphs also help discover seasonal and/or cyclic tendencies present in the data. These usually manifest as
				approximately evenly-spaces peaks or troughs.</p>

		</div>
		<img src="{{ graphs["lineplot"]}}">
		<div class="info">
			<p><a href="https://en.wikipedia.org/wiki/Autocorrelation">Autocorrelation</a> and <a
					href="https://en.wikipedia.org/wiki/Partial_autocorrelation_function">Partial-Autocorrelation </a>
				plots can provide hints on a suitable model to start with. <a
					href="https://en.wikipedia.org/wiki/Box%E2%80%93Jenkins_method#Autocorrelation_and_partial_autocorrelation_plots">This
					article</a> describes how.</p>
		</div>

		<img src="{{ graphs["acf&pacf"]}}">
		<div class="info">
			<p>Testing for stationarity, and filtering out seasonal & trend effects is an essential first step. Model fitting
				usually requires that the time series data be <a href="https://cran.r-project.org/web/packages/TSTutorial/vignettes/Stationary.pdf">stationary</a>.</p>
		</div>
		<img src="{{ graphs["seasonal_decomposition"]}}">

		<div class="info">
			<p>Graphs are also useful in assessing the goodness of fit. In general, a good model should reasonably
				replicate the behaviour of the data used.</p>
		</div>
		<blockquote><b>Note:</b> The results below are for automatically fitted models, with limited optimisation. In practice, to achieve
			reliable results; models are selected based on the findings from an exploratory analysis the data, and they often need several rounds of evaluation and fine-tuning.</blockquote>
		{% for graph in graphs["model_fit"] %}
		<img src="{{ graph }}">
		{% endfor %}

		<h2>2. Numerical output</h2>
		<div class="info">
			<p>A 14-period sample of the results, just to see how the numbers vary.</p>
		</div>
	</div>
	<table>
		<tr>
			<td>Index</td>
			<td>Actual Data</td>
			<td>AR(Autoreg)</td>
			<td>ARMA</td>
			<td>Exponential Smoothing</td>
		</tr>
		{% for index, values in sample.iterrows() %}
		<tr>
			<td>{{ index }}</td>
			<td>{{ values['Actual Data'] }}</td>
			<td>{{ values['AR'] }}</td>
			<td>{{ values['ARMA'] }}</td>
			<td>{{ values['Exponential Smoothing'] }}</td>
		</tr>
		{% endfor %}
		<tr>
			<td><b>Totals</b></td>
			{% for total in totals %}
			<td><b>{{ total }}</b></td>
			{% endfor %}
		</tr>
	</table>
	<a class="hvr-bob button" href="{{ url_for('static', filename='files/results.csv') }}">Download Results</a>
	<footer>
		<a class="hvr-bob button" href="/">Back to Home</a>
	</footer>
</body>

</html>
{% endblock %}